<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAlibrate: Sanjeevni - Your Lifeline to CA Success</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0A1828 0%, #1a3a52 100%);
            color: #fff;
            line-height: 1.6;
            min-height: 100vh;
            width: 100%;
        }

        header {
            background: rgba(10, 24, 40, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 217, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00D9FF;
            cursor: pointer;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-login {
            background: rgba(0, 217, 255, 0.1);
            color: #00D9FF;
            border: 2px solid #00D9FF;
        }

        .btn-login:hover {
            background: #00D9FF;
            color: #0A1828;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00D9FF 0%, #7B61FF 100%);
            color: #fff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 217, 255, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero {
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        .hero-content h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #00D9FF 0%, #00FF88 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-content p {
            font-size: 20px;
            color: #ccc;
            margin-bottom: 40px;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-large {
            padding: 15px 40px;
            font-size: 16px;
        }

        .form-container {
            max-width: 400px;
            margin: 60px auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .form-container h2 {
            margin-bottom: 30px;
            color: #00D9FF;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #00D9FF;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.1);
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.3);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
        }

        .form-buttons button {
            flex: 1;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .dashboard {
            min-height: calc(100vh - 80px);
            padding: 40px 0;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .dashboard-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #00D9FF;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: #00D9FF;
            box-shadow: 0 10px 30px rgba(0, 217, 255, 0.2);
        }

        .card h3 {
            color: #00D9FF;
            margin-bottom: 10px;
        }

        .card p {
            color: #ccc;
            font-size: 14px;
        }

        .feature-page {
            min-height: calc(100vh - 80px);
            padding: 40px 0;
        }

        .feature-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .feature-header h1 {
            font-size: 36px;
            margin-bottom: 15px;
            color: #00D9FF;
        }

        .back-button {
            margin-bottom: 20px;
        }

        .feature-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .feature-content h2 {
            color: #00D9FF;
            margin-top: 20px;
            margin-bottom: 15px;
        }

        .feature-content label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #00D9FF;
            margin-top: 15px;
        }

        .feature-content select,
        .feature-content input,
        .feature-content textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .feature-content select:focus,
        .feature-content input:focus,
        .feature-content textarea:focus {
            outline: none;
            border-color: #00D9FF;
            background: rgba(0, 217, 255, 0.1);
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.3);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.03);
        }

        th, td {
            border: 1px solid rgba(0, 217, 255, 0.2);
            padding: 12px;
            text-align: left;
            color: #ccc;
        }

        th {
            background: rgba(0, 217, 255, 0.1);
            color: #00D9FF;
            font-weight: 600;
        }

        tr:hover {
            background: rgba(0, 217, 255, 0.05);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 5px 10px;
            font-size: 12px;
            background: rgba(0, 217, 255, 0.1);
            color: #00D9FF;
            border: 1px solid #00D9FF;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            background: #00D9FF;
            color: #0A1828;
        }

        .timer-display {
            font-size: 48px;
            text-align: center;
            color: #00D9FF;
            margin: 30px 0;
            font-weight: bold;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .chatbox {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .chatbox-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            max-width: 80%;
        }

        .user-message {
            background: rgba(0, 217, 255, 0.1);
            margin-left: auto;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .bot-message {
            background: rgba(123, 97, 255, 0.1);
            border: 1px solid rgba(123, 97, 255, 0.2);
        }

        .chatbox-input {
            display: flex;
            gap: 10px;
        }

        .chatbox-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border-radius: 8px;
        }

        .chatbox-input button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #00D9FF 0%, #7B61FF 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .message-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 15px 25px;
            background: #00FF88;
            color: #000;
            border-radius: 8px;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            font-weight: 600;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        footer {
            background: rgba(10, 24, 40, 0.95);
            padding: 30px 0;
            text-align: center;
            border-top: 1px solid rgba(0, 217, 255, 0.1);
            margin-top: 60px;
            color: #ccc;
            width: 100%;
        }

        .footer-links a {
            color: #00D9FF;
            text-decoration: none;
            margin: 0 15px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #00FF88;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .stat-card h3 {
            color: #00D9FF;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #ccc;
            font-size: 14px;
        }

        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .payment-modal.active {
            display: flex;
        }

        .payment-modal-content {
            background: rgba(10, 24, 40, 0.95);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
        }

        .payment-modal-content h2 {
            color: #00D9FF;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .qr-code {
            max-width: 300px;
            margin: 20px auto;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
        }

        .qr-code img {
            max-width: 100%;
            height: auto;
        }

        .upi-id {
            font-size: 20px;
            color: #00FF88;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 8px;
            border: 2px solid rgba(0, 255, 136, 0.2);
        }

        .close-modal {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .hero-content h1 { font-size: 32px; }
            .btn-large { width: 100%; }
            .dashboard-grid, .stats { grid-template-columns: 1fr; }
            .timer-display { font-size: 36px; }
            .payment-modal-content { padding: 20px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo" onclick="showPage('home')">üéì CAlibrate: Sanjeevni</div>
            <div class="nav-buttons">
                <button class="btn btn-login" onclick="showPage('home')">Home</button>
                <button class="btn btn-primary" onclick="showPage('login')">Login</button>
                <button class="btn btn-login" onclick="showPage('adminLogin')">Admin</button>
            </div>
        </div>
    </header>

    <!-- PAYMENT MODAL -->
    <div id="paymentModal" class="payment-modal">
        <div class="payment-modal-content">
            <h2>Complete Your Payment</h2>
            <p style="color: #ccc; margin-bottom: 20px;">Scan the QR code or use the UPI ID below</p>
            
            <div class="qr-code">
                <img id="qrCodeImage" src="" alt="UPI QR Code" style="max-width: 100%; height: auto;">
            </div>

            <div class="upi-id">
                <strong>UPI ID:</strong> 9044621001@ibl
            </div>

            <p style="color: #ccc; margin: 20px 0; font-size: 12px;">
                ‚úÖ After payment, send screenshot to: CAlibrate.sanjeevni@gmail.com<br>
                ‚è±Ô∏è Your subscription will be activated within 1 hour
            </p>

            <button class="close-modal" onclick="closePaymentModal()">Close</button>
        </div>
    </div>

    <!-- HOME PAGE -->
    <div id="homePage" class="page active">
        <div class="hero">
            <div class="hero-content">
                <h1>Welcome to CAlibrate: Sanjeevni</h1>
                <p>Your Lifeline to CA Success</p>
                <p style="font-size: 16px; margin-bottom: 40px;">Master CA curriculum with our complete learning platform</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary btn-large" onclick="showPage('signup')">Get Started ‚Üí</button>
                    <button class="btn btn-login btn-large" onclick="showPage('login')">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SIGNUP PAGE -->
    <div id="signupPage" class="page">
        <div class="form-container">
            <h2>Create Your Account</h2>
            <form onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="fullName" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label>Email Address *</label>
                    <input type="email" id="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label>Create User ID *</label>
                    <input type="text" id="userId" placeholder="e.g., ca_ravi123" required>
                </div>
                <div class="form-group">
                    <label>Password *</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label>CA Level *</label>
                    <select id="level" required>
                        <option value="">Select Level</option>
                        <option value="Foundation">Foundation</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Final">Final</option>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" onclick="showPage('home')">Back</button>
                    <button type="submit" class="btn btn-primary">Sign Up</button>
                </div>
            </form>
        </div>
    </div>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="page">
        <div class="form-container">
            <h2>Welcome Back</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>User ID or Email *</label>
                    <input type="text" id="loginUserId" placeholder="Enter user ID or email" required>
                </div>
                <div class="form-group">
                    <label>Password *</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label>CA Level *</label>
                    <select id="loginLevel" required>
                        <option value="">Select Level</option>
                        <option value="Foundation">Foundation</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Final">Final</option>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" onclick="showPage('home')">Back</button>
                    <button type="submit" class="btn btn-primary">Login</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ADMIN LOGIN PAGE -->
    <div id="adminLoginPage" class="page">
        <div class="form-container">
            <h2>Admin Login</h2>
            <form onsubmit="handleAdminLogin(event)">
                <div class="form-group">
                    <label>Admin Email *</label>
                    <input type="email" id="adminEmail" placeholder="ayushvikram812@gmail.com" required>
                </div>
                <div class="form-group">
                    <label>Admin Password *</label>
                    <input type="password" id="adminPassword" placeholder="Enter admin password" required>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" onclick="showPage('home')">Back</button>
                    <button type="submit" class="btn btn-primary">Login</button>
                </div>
            </form>
            <p style="text-align: center; margin-top: 20px; color: #ccc; font-size: 12px;">
                Demo: ayushvikram812@gmail.com | Admin@123
            </p>
        </div>
    </div>

    <!-- DASHBOARD PAGE -->
    <div id="dashboardPage" class="page">
        <div class="container">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1>Welcome, <span id="studentName">Student</span>! üëã</h1>
                    <p id="greetingMessage" style="color: #ccc; margin-bottom: 30px;"></p>
                </div>

                <div class="dashboard-grid">
                    <div class="card" onclick="showPage('topics')">
                        <h3>üìö Topic Tracker</h3>
                        <p>Track topics chapter-wise with tables</p>
                    </div>
                    <div class="card" onclick="showPage('timer')">
                        <h3>‚è±Ô∏è Focus Timer</h3>
                        <p>Pomodoro timer for study sessions</p>
                    </div>
                    <div class="card" onclick="showPage('groups')">
                        <h3>üë• Study Groups</h3>
                        <p>Join study groups with peers</p>
                    </div>
                    <div class="card" onclick="showPage('chatbot')">
                        <h3>ü§ñ Sanjeevni Chatbot</h3>
                        <p>AI chatbot for doubt resolution</p>
                    </div>
                    <div class="card" onclick="showPage('badges')">
                        <h3>üèÖ Badges</h3>
                        <p>Track achievement badges</p>
                    </div>
                    <div class="card" onclick="showPage('payment')">
                        <h3>üí≥ Subscription</h3>
                        <p>View subscription plans</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn btn-login" onclick="handleLogout()">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TOPIC TRACKER PAGE -->
    <div id="topicsPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>üìö Topic Tracker</h1>
                </div>

                <div class="feature-content">
                    <h2>Select Your Subject & Chapter</h2>
                    
                    <label>Select Subject:</label>
                    <select id="subjectSelect" onchange="loadChapters()">
                        <option value="">Choose Subject...</option>
                    </select>

                    <label>Select Chapter:</label>
                    <select id="chapterSelect" onchange="loadTopics()">
                        <option value="">Choose Chapter...</option>
                    </select>

                    <h2>Add New Topic</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <input type="text" id="topicName" placeholder="Topic Name">
                        <input type="text" id="questionNumbers" placeholder="Q. Numbers (e.g., 1-5, 7-10)">
                        <select id="classification">
                            <option value="">Classification...</option>
                            <option value="Most Important">Most Important</option>
                            <option value="Important">Important</option>
                            <option value="Good for Reading">Good for Reading</option>
                            <option value="Okay">Okay</option>
                        </select>
                        <button class="btn btn-primary" onclick="addTopic()">Add Topic</button>
                    </div>

                    <h2>Topic List</h2>
                    <table id="topicTable">
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Topic</th>
                                <th>Questions</th>
                                <th>Classification</th>
                                <th>Revision</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="topicBody">
                            <tr>
                                <td colspan="6" style="text-align: center; color: #999;">Select a chapter to add topics</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2 style="margin-top: 30px;">Statistics</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <h3 id="totalTopics">0</h3>
                            <p>Total Topics</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="revisionCount">0</h3>
                            <p>For Revision</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="completedCount">0</h3>
                            <p>Completed</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOCUS TIMER PAGE -->
    <div id="timerPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>‚è±Ô∏è Focus Timer</h1>
                </div>

                <div class="feature-content">
                    <label>Session Type:</label>
                    <select id="sessionType" onchange="updateTimer()">
                        <option value="study">Study (25 minutes)</option>
                        <option value="break">Break (5 minutes)</option>
                        <option value="longbreak">Long Break (15 minutes)</option>
                    </select>

                    <div class="timer-display" id="timerDisplay">25:00</div>

                    <div class="timer-controls">
                        <button class="btn btn-primary" onclick="startTimer()">Start</button>
                        <button class="btn btn-login" onclick="pauseTimer()">Pause</button>
                        <button class="btn btn-secondary" onclick="resetTimer()">Reset</button>
                    </div>

                    <h2>Session Stats</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <h3 id="sessionsCompleted">0</h3>
                            <p>Sessions Completed</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="totalMinutes">0</h3>
                            <p>Total Minutes</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="currentStreak">0</h3>
                            <p>Current Streak</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STUDY GROUPS PAGE -->
    <div id="groupsPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>üë• Study Groups</h1>
                </div>

                <div class="feature-content">
                    <h2>Join Study Groups</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Group Name</th>
                                <th>Subject</th>
                                <th>Members</th>
                                <th>Messages</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ind AS Concepts</td>
                                <td>Financial Reporting</td>
                                <td>24</td>
                                <td>156</td>
                                <td><button class="btn-small" onclick="showMessage('‚úÖ Joined group!')">Join</button></td>
                            </tr>
                            <tr>
                                <td>Taxation Discussion</td>
                                <td>Taxation</td>
                                <td>18</td>
                                <td>89</td>
                                <td><button class="btn-small" onclick="showMessage('‚úÖ Joined group!')">Join</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- CHATBOT PAGE -->
    <div id="chatbotPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>ü§ñ Sanjeevni AI Chatbot</h1>
                </div>

                <div class="feature-content">
                    <div class="chatbox">
                        <div class="chatbox-messages" id="chatMessages">
                            <div class="bot-message" style="padding: 10px;">
                                üëã <strong>Sanjeevni:</strong> Hello! Ask me any CA question in simple language!
                            </div>
                        </div>
                        <div class="chatbox-input">
                            <input type="text" id="userInput" placeholder="Ask your question..." onkeypress="handleKeyPress(event)">
                            <button onclick="sendMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BADGES PAGE -->
    <div id="badgesPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>üèÖ Achievement Badges</h1>
                </div>

                <div class="feature-content">
                    <h2>Your Badges (50+ Available)</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div style="text-align: center; padding: 20px; background: rgba(0, 217, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üî•</div>
                            <p style="color: #00D9FF; font-weight: 600;">Hot Streak</p>
                        </div>
                        <div style="text-align: center; padding: 20px; background: rgba(0, 217, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">‚úÖ</div>
                            <p style="color: #00D9FF; font-weight: 600;">Chapter Master</p>
                        </div>
                        <div style="text-align: center; padding: 20px; background: rgba(0, 217, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">‚è±Ô∏è</div>
                            <p style="color: #00D9FF; font-weight: 600;">Focus Master</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAYMENT PAGE -->
    <div id="paymentPage" class="page">
        <div class="container">
            <div class="feature-page">
                <div class="back-button">
                    <button class="btn btn-login" onclick="showPage('dashboard')">‚Üê Back to Dashboard</button>
                </div>
                <div class="feature-header">
                    <h1>üí≥ Subscription Plans</h1>
                </div>

                <div class="feature-content">
                    <h2>30-Day Free Trial Available!</h2>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: rgba(0, 217, 255, 0.1); padding: 20px; border-radius: 8px; border: 2px solid rgba(0, 217, 255, 0.2);">
                            <h3 style="color: #00D9FF; margin-bottom: 15px;">Monthly</h3>
                            <p style="font-size: 24px; color: #00FF88; margin-bottom: 10px;"><strong>‚Çπ50</strong>/month</p>
                            <button class="btn btn-primary" style="width: 100%;" onclick="openPaymentModal()">Subscribe</button>
                        </div>

                        <div style="background: rgba(0, 217, 255, 0.1); padding: 20px; border-radius: 8px; border: 2px solid #00D9FF;">
                            <h3 style="color: #00D9FF; margin-bottom: 15px;">3-Month ‚≠ê</h3>
                            <p style="font-size: 24px; color: #00FF88; margin-bottom: 10px;"><strong>‚Çπ149</strong></p>
                            <button class="btn btn-primary" style="width: 100%; background: #00FF88; color: #0A1828;" onclick="openPaymentModal()">Subscribe</button>
                        </div>

                        <div style="background: rgba(0, 217, 255, 0.1); padding: 20px; border-radius: 8px; border: 2px solid rgba(0, 217, 255, 0.2);">
                            <h3 style="color: #00D9FF; margin-bottom: 15px;">Annual</h3>
                            <p style="font-size: 24px; color: #00FF88; margin-bottom: 10px;"><strong>‚Çπ550</strong></p>
                            <button class="btn btn-primary" style="width: 100%;" onclick="openPaymentModal()">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div id="adminDashboardPage" class="page">
        <div class="container">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1>Admin Dashboard</h1>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <h3>127</h3>
                        <p>Total Students</p>
                    </div>
                    <div class="stat-card">
                        <h3>‚Çπ12,450</h3>
                        <p>Revenue This Month</p>
                    </div>
                    <div class="stat-card">
                        <h3>82</h3>
                        <p>Paid Subscribers</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn btn-login" onclick="handleAdminLogout()">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-links">
            <a onclick="showPage('home')">Home</a>
            <a href="mailto:CAlibrate.sanjeevni@gmail.com">Contact</a>
        </div>
        <p>CAlibrate: Sanjeevni ¬© 2025</p>
        <p style="margin-top: 10px; font-size: 12px;">üìß CAlibrate.sanjeevni@gmail.com | üí≥ UPI: 9044621001@ibl</p>
    </footer>

    <script>
        // Complete curriculum data for all levels
        const curriculumData = {
            Foundation: {
                'Accounting': [
                    'Chapter 1: Introduction to Accounting',
                    'Chapter 2: Journal Entries',
                    'Chapter 3: Ledger',
                    'Chapter 4: Trial Balance',
                    'Chapter 5: Bank Reconciliation',
                    'Chapter 6: Financial Statements'
                ],
                'Business Law': [
                    'Chapter 1: Contract Act',
                    'Chapter 2: Sale of Goods Act',
                    'Chapter 3: Indian Partnership Act',
                    'Chapter 4: Companies Act'
                ],
                'Business Mathematics': [
                    'Chapter 1: Algebra',
                    'Chapter 2: Calculus',
                    'Chapter 3: Statistics',
                    'Chapter 4: Probability'
                ]
            },
            Intermediate: {
                'Accounting': [
                    'Chapter 1: Bank Reconciliation',
                    'Chapter 2: Depreciation',
                    'Chapter 3: Provision & Reserves',
                    'Chapter 4: Accounts from Incomplete Records',
                    'Chapter 5: Consolidation of Accounts',
                    'Chapter 6: Investment Accounts'
                ],
                'Taxation': [
                    'Chapter 1: Income Tax - Basic',
                    'Chapter 2: Computation of Income',
                    'Chapter 3: Income from Salary',
                    'Chapter 4: Income from House Property',
                    'Chapter 5: Income from Business',
                    'Chapter 6: GST Fundamentals'
                ],
                'Cost Accounting': [
                    'Chapter 1: Introduction to Costing',
                    'Chapter 2: Material Costing',
                    'Chapter 3: Labor Costing',
                    'Chapter 4: Overhead Costing'
                ]
            },
            Final: {
                'Auditing & Assurance': [
                    'Chapter 1: Auditing Standards',
                    'Chapter 2: Planning & Risk Assessment',
                    'Chapter 3: Audit Procedures',
                    'Chapter 4: Materiality',
                    'Chapter 5: Evidence & Testing',
                    'Chapter 6: Audit Reporting',
                    'Chapter 7: Special Audits'
                ],
                'Financial Reporting (34 Ind AS)': [
                    'Ind AS 1: Presentation',
                    'Ind AS 2: Inventories',
                    'Ind AS 3: Business Combinations',
                    'Ind AS 4: Contingent Liabilities',
                    'Ind AS 5: Non-Current Assets',
                    'Ind AS 6: Exploration for Minerals',
                    'Ind AS 7: Statement of Cash Flows',
                    'Ind AS 8: Accounting Policies',
                    'Ind AS 9: Revenue from Contracts',
                    'Ind AS 10: Events After Balance',
                    'Ind AS 11: Construction Contracts',
                    'Ind AS 12: Income Taxes',
                    'Ind AS 13: Leases',
                    'Ind AS 14: Regulatory Deferral',
                    'Ind AS 15: Employment Benefits',
                    'Ind AS 16: Property Plant Equipment',
                    'Ind AS 17: Leases',
                    'Ind AS 18: Revenue',
                    'Ind AS 19: Employee Benefits',
                    'Ind AS 20: Accounting for Govt Grants',
                    'Ind AS 21: Foreign Currency',
                    'Ind AS 23: Borrowing Costs',
                    'Ind AS 24: Related Party Disclosures',
                    'Ind AS 27: Separate FS',
                    'Ind AS 28: Investments in Associates',
                    'Ind AS 29: Investments in JVs',
                    'Ind AS 32: Financial Instruments',
                    'Ind AS 33: Earnings Per Share',
                    'Ind AS 34: Interim FS',
                    'Ind AS 36: Impairment',
                    'Ind AS 37: Provisions',
                    'Ind AS 38: Intangible Assets',
                    'Ind AS 40: Investment Property',
                    'Ind AS 41: Biological Assets'
                ],
                'Direct Taxation': [
                    'Chapter 1: Income Tax - Advanced',
                    'Chapter 2: Income from Various Sources',
                    'Chapter 3: Deductions & Exemptions',
                    'Chapter 4: Capital Gains',
                    'Chapter 5: Set-off & Relief',
                    'Chapter 6: Transfer Pricing',
                    'Chapter 7: International Tax'
                ],
                'Corporate Law': [
                    'Chapter 1: Companies Act Provisions',
                    'Chapter 2: Directors & Management',
                    'Chapter 3: Share Capital',
                    'Chapter 4: Meetings & Resolutions',
                    'Chapter 5: Accounts & Audits',
                    'Chapter 6: Winding Up',
                    'Chapter 7: Regulatory Compliance'
                ]
            }
        };

        let timerInterval = null;
        let timeLeft = 1500;
        let topicsData = {};
        let currentChapter = '';

        function showPage(pageName) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(p => p.classList.remove('active'));
            document.getElementById(pageName + 'Page').classList.add('active');
            window.scrollTo(0, 0);
        }

        function handleSignup(event) {
            event.preventDefault();
            const fullName = document.getElementById('fullName').value;
            const userId = document.getElementById('userId').value;
            const level = document.getElementById('level').value;

            localStorage.setItem('currentStudent', JSON.stringify({fullName, userId, level, joinDate: new Date().toLocaleDateString()}));
            showMessage('‚úÖ Account created! Logging in...');
            setTimeout(() => {
                document.getElementById('loginUserId').value = userId;
                handleLogin(new Event('submit'));
            }, 1500);
        }

        function handleLogin(event) {
            event.preventDefault();
            const userId = document.getElementById('loginUserId').value;
            const level = document.getElementById('loginLevel').value;
            localStorage.setItem('currentStudent', JSON.stringify({fullName: userId, userId, level}));
            showMessage('‚úÖ Login successful!');
            setTimeout(() => { showPage('dashboard'); setGreeting(); }, 800);
        }

        function handleAdminLogin(event) {
            event.preventDefault();
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            if (email === 'ayushvikram812@gmail.com' && password === 'Admin@123') {
                localStorage.setItem('isAdmin', 'true');
                showMessage('‚úÖ Admin login successful!');
                setTimeout(() => { showPage('adminDashboard'); }, 800);
            } else {
                showMessage('‚ùå Invalid credentials');
            }
        }

        function handleLogout() {
            localStorage.removeItem('currentStudent');
            showMessage('üëã Logged out!');
            setTimeout(() => { showPage('home'); }, 800);
        }

        function handleAdminLogout() {
            localStorage.removeItem('isAdmin');
            showMessage('üëã Admin logged out!');
            setTimeout(() => { showPage('home'); }, 800);
        }

        function setGreeting() {
            const student = JSON.parse(localStorage.getItem('currentStudent'));
            if (student) {
                document.getElementById('studentName').textContent = student.fullName;
                const hour = new Date().getHours();
                let greeting = hour < 12 ? 'üåÖ Good Morning!' : hour < 17 ? 'üå§Ô∏è Good Afternoon!' : hour < 21 ? 'üåÜ Good Evening!' : 'üåô Good Night!';
                document.getElementById('greetingMessage').textContent = greeting + ' Ready to master CA?';
                populateSubjects();
            }
        }

        function populateSubjects() {
            const student = JSON.parse(localStorage.getItem('currentStudent'));
            const subjectSelect = document.getElementById('subjectSelect');
            const level = student.level;
            subjectSelect.innerHTML = '<option value="">Choose Subject...</option>';
            
            if (curriculumData[level]) {
                Object.keys(curriculumData[level]).forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.text = subject;
                    subjectSelect.appendChild(option);
                });
            }
        }

        function loadChapters() {
            const student = JSON.parse(localStorage.getItem('currentStudent'));
            const subject = document.getElementById('subjectSelect').value;
            const chapterSelect = document.getElementById('chapterSelect');
            chapterSelect.innerHTML = '<option value="">Choose Chapter...</option>';
            
            if (subject && curriculumData[student.level][subject]) {
                curriculumData[student.level][subject].forEach(chapter => {
                    const option = document.createElement('option');
                    option.value = chapter;
                    option.text = chapter;
                    chapterSelect.appendChild(option);
                });
            }
        }

        function loadTopics() {
            currentChapter = document.getElementById('chapterSelect').value;
            if (!currentChapter) return;
            if (!topicsData[currentChapter]) topicsData[currentChapter] = [];
            displayTopics();
        }

        function addTopic() {
            if (!currentChapter) { showMessage('‚ùå Please select a chapter'); return; }
            const name = document.getElementById('topicName').value;
            const questions = document.getElementById('questionNumbers').value;
            const classification = document.getElementById('classification').value;
            if (!name || !questions || !classification) { showMessage('‚ùå Fill all fields'); return; }

            topicsData[currentChapter].push({name, questions, classification, revision: false});
            document.getElementById('topicName').value = '';
            document.getElementById('questionNumbers').value = '';
            document.getElementById('classification').value = '';
            displayTopics();
            showMessage('‚úÖ Topic added!');
        }

        function displayTopics() {
            const tbody = document.getElementById('topicBody');
            tbody.innerHTML = '';
            const topics = topicsData[currentChapter] || [];
            if (topics.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">No topics added yet</td></tr>';
                return;
            }

            topics.forEach((t, i) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${i + 1}</td>
                    <td>${t.name}</td>
                    <td>${t.questions}</td>
                    <td>${t.classification}</td>
                    <td><input type="checkbox" ${t.revision ? 'checked' : ''} onchange="toggleRevision(${i})"></td>
                    <td><button class="btn-small" onclick="deleteTopic(${i})">Delete</button></td>
                `;
            });

            document.getElementById('totalTopics').textContent = topics.length;
            document.getElementById('revisionCount').textContent = topics.filter(t => t.revision).length;
            document.getElementById('completedCount').textContent = topics.filter(t => !t.revision).length;
        }

        function deleteTopic(i) {
            topicsData[currentChapter].splice(i, 1);
            displayTopics();
        }

        function toggleRevision(i) {
            topicsData[currentChapter][i].revision = !topicsData[currentChapter][i].revision;
            displayTopics();
        }

        function updateTimer() {
            const type = document.getElementById('sessionType').value;
            if (type === 'study') timeLeft = 1500;
            else if (type === 'break') timeLeft = 300;
            else timeLeft = 900;
            displayTime();
        }

        function displayTime() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                timeLeft--;
                displayTime();
                if (timeLeft === 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    showMessage('‚úÖ Session completed!');
                    updateTimer();
                }
            }, 1000);
        }

        function pauseTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetTimer() {
            pauseTimer();
            updateTimer();
        }

        function sendMessage() {
            const input = document.getElementById('userInput').value;
            if (!input) return;

            const chatMessages = document.getElementById('chatMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'user-message';
            userMsg.innerHTML = `<strong>You:</strong> ${input}`;
            chatMessages.appendChild(userMsg);

            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'bot-message';
                const response = generateAIResponse(input);
                botMsg.innerHTML = `<strong>Sanjeevni:</strong> ${response}`;
                chatMessages.appendChild(botMsg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 500);

            document.getElementById('userInput').value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }

        function generateAIResponse(question) {
            const lower = question.toLowerCase();
            const responses = {
                'revenue': 'Revenue is recognized when control of goods/services transfers to customer',
                'depreciation': 'Depreciation = (Asset Cost - Salvage Value) / Useful Life',
                'audit': 'Auditing is systematic examination of financial statements',
                'gst': 'GST is Goods and Services Tax, currently 5%-28% depending on goods/services',
                'balance sheet': 'Balance Sheet shows assets, liabilities, and equity at a specific date',
                'profit loss': 'P&L statement shows revenue, expenses, and net profit/loss for a period'
            };

            for (let key in responses) {
                if (lower.includes(key)) return responses[key];
            }

            return 'That is a great CA concept! Break it into parts: 1) Identify core principle 2) Understand rules 3) Practice examples. Would you like me to explain further?';
        }

        function openPaymentModal() {
            document.getElementById('paymentModal').classList.add('active');
            // Note: In production, load QR code image from your server
            const qrCodeImage = document.getElementById('qrCodeImage');
            // Using a placeholder - replace with actual QR code image
            qrCodeImage.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"%3E%3Crect fill="white" width="200" height="200"/%3E%3Ctext x="50" y="100" font-size="14" fill="black"%3EQR CODE%3C/text%3E%3C/svg%3E';
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
        }

        function showMessage(text) {
            const msg = document.createElement('div');
            msg.className = 'message-notification';
            msg.textContent = text;
            document.body.appendChild(msg);
            setTimeout(() => msg.remove(), 3000);
        }

        window.addEventListener('load', () => {
            const student = localStorage.getItem('currentStudent');
            const isAdmin = localStorage.getItem('isAdmin');
            if (isAdmin) showPage('adminDashboard');
            else if (student) { showPage('dashboard'); setGreeting(); }
        });
    </script>
</body>
</html>
